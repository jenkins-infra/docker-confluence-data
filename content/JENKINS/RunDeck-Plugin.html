<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : RunDeck Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : RunDeck Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (vbehar)</span>, last modified by <span class='editor'> Unknown User (emszpak)</span> on Jan 28, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Rundeck <a href="https://plugins.jenkins.io/rundeck" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Older versions of this plugin may not be safe to use. Please review the following warnings before using an older version:</p>

<ul>
	<li><a href="https://jenkins.io/security/advisory/2019-12-17/#SECURITY-1636" class="external-link" rel="nofollow">Credentials stored in plain text</a></li>
	<li><a href="https://jenkins.io/security/advisory/2020-03-09/#SECURITY-1702" class="external-link" rel="nofollow">XXE vulnerability</a></li>
	<li><a href="https://jenkins.io/security/advisory/2019-10-16/#SECURITY-1460" class="external-link" rel="nofollow">CSRF vulnerability and missing permission check</a></li>
</ul>

</div></div>

<p>
<p>This plugin is a Notifier that will talk to a <a href="http://www.rundeck.org" class="external-link" rel="nofollow">RunDeck</a> instance (via its HTTP API) to schedule a job execution on RunDeck after a successful build on Jenkins.<br/>
It is also a Trigger that will schedule a build on Jenkins after a job execution on RunDeck (using RunDeck WebHook Notification).<br/>
In addition, it turns Jenkins into an <a href="http://rundeck.org/docs/RunDeck-Guide.html#option-model-provider" class="external-link" rel="nofollow">Option provider</a> for RunDeck, if you want to use your Jenkins build artifacts as an option to a RunDeck job.</p></p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/54296708/54493207.png" data-image-src="attachments/54296708/54493207.png" data-unresolved-comment-count="0" data-linked-resource-id="54493207" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="logo-rundeck.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="54296708" data-linked-resource-container-version="63"></span></p>

<p><strong>Table of Contents</strong></p>
<style type='text/css'>/*<![CDATA[*/
div.rbtoc1631022246215 {padding: 0px;}
div.rbtoc1631022246215 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1631022246215 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1631022246215'>
<ul class='toc-indentation'>
<li><a href='#RunDeckPlugin-Use'>Use</a>
<ul class='toc-indentation'>
<li><a href='#RunDeckPlugin-DeploymentPipeline'>Deployment Pipeline</a>
<ul class='toc-indentation'>
<li><a href='#RunDeckPlugin-Configuration'>Configuration</a></li>
</ul>
</li>
<li><a href='#RunDeckPlugin-Post-deploymentjob'>Post-deployment job</a>
<ul class='toc-indentation'>
<li><a href='#RunDeckPlugin-Configuration.1'>Configuration</a></li>
<li><a href='#RunDeckPlugin-Use.1'>Use</a></li>
</ul>
</li>
<li><a href='#RunDeckPlugin-OptionProvider'>Option Provider</a>
<ul class='toc-indentation'>
<li><a href='#RunDeckPlugin-OptionProviderforartifacts'>Option Provider for artifacts</a></li>
<li><a href='#RunDeckPlugin-OptionProviderforbuilds'>Option Provider for builds</a></li>
<li><a href='#RunDeckPlugin-OptionProviderAccess'>Option Provider Access</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#RunDeckPlugin-CompatibilityMatrix'>Compatibility Matrix</a></li>
<li><a href='#RunDeckPlugin-FAQ'>FAQ</a>
<ul class='toc-indentation'>
<li><a href='#RunDeckPlugin-KnownIssues'>Known Issues</a></li>
</ul>
</li>
<li><a href='#RunDeckPlugin-Links'>Links</a></li>
<li><a href='#RunDeckPlugin-ChangeLog'>Change Log</a>
<ul class='toc-indentation'>

<ul class='toc-indentation'>
<li><a href='#RunDeckPlugin-Version3.6.1(Jan26,2017)'>Version 3.6.1 (Jan 26, 2017)</a></li>
<li><a href='#RunDeckPlugin-TODOlist'>TODO list</a></li>
</ul>
<li><a href='#RunDeckPlugin-Previousversions'>Previous versions</a></li>
</ul>
</li>
</ul>
</div>

<h2 id="RunDeckPlugin-Use">Use</h2>

<p><a href="http://www.rundeck.org" class="external-link" rel="nofollow">RunDeck</a> is an open-source tool for automating tasks on multiple nodes, with both a CLI and a web-based interface. You can use it to deploy your application to multiple nodes/appserv easily. It has a concept of jobs and build similar to Jenkins.</p>

<p>You have 3 ways to use this plugin :</p>
<ul>
	<li>build a &quot;<strong>deployment pipeline</strong>&quot;, (the &quot;0-click deployment process&quot;) : you commit a change, Jenkins picks it up, build, test and so on, and then triggers a job execution on RunDeck for deploying your application. This requires some configuration on Jenkins (both global configuration and job configuration), to link a Jenkins job with a RunDeck job.</li>
	<li>continue your pipeline after the deployment : RunDeck deploys your application, then triggers a build on Jenkins to run some integration tests (Selenium ?). This requires some configuration on RunDeck (WebHook notification) and on Jenkins (Trigger configuration, and optionally filter the notifications from RunDeck).</li>
	<li>use Jenkins as an <a href="http://rundeck.org/docs/RunDeck-Guide.html#option-model-provider" class="external-link" rel="nofollow"><strong>Option provider</strong></a> for RunDeck : when you execute a RunDeck job, you can have an (input) option, whose values could be retrieve from an external system (here, Jenkins). So you can have a RunDeck-job that use a Jenkins-artifact (from a Jenkins-build) as an input.</li>
</ul>


<p>Note that you can combine those use-cases.</p>

<h3 id="RunDeckPlugin-DeploymentPipeline">Deployment Pipeline</h3>

<p>The goal is to have a <strong>0-click deployment process</strong> : you commit a change, Jenkins picks it up, build, test and so on, and then triggers a job execution on RunDeck for deploying your application.<br/>
You can also have an &quot;on-demand&quot; process : configure a &quot;tag&quot; in the job configuration (see below), and the plugin will only notify RunDeck if the tag is present in the SCM changelog (= in the commit message).</p>

<h4 id="RunDeckPlugin-Configuration">Configuration</h4>

<p>First, you need to configure your RunDeck instance on the main Jenkins configuration page :<br/>
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/54296708/54493205.png" data-image-src="attachments/54296708/54493205.png" data-unresolved-comment-count="0" data-linked-resource-id="54493205" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="jenkins-config.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="54296708" data-linked-resource-container-version="63"></span></p>

<p>As of Rundeck plugin version 3.0, you can specify an Authtoken instead of Login/Password.  Additionally you can set the API version if you need to use a lower number than the latest version.</p>

<p>You can use the &quot;Test Connection&quot; button to make sure that Jenkins can talk to your RunDeck instance :</p>

<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"><p> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/54296708/57409732.png" data-image-src="attachments/54296708/57409732.png" data-unresolved-comment-count="0" data-linked-resource-id="57409732" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jenkins-config-validation-nok.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="54296708" data-linked-resource-container-version="63"></span> </p></td>
<td class="confluenceTd"><p> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/54296708/57409733.png" data-image-src="attachments/54296708/57409733.png" data-unresolved-comment-count="0" data-linked-resource-id="57409733" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jenkins-config-validation-ok.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="54296708" data-linked-resource-container-version="63"></span> </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> <em>Error message in case of error</em> </p></td>
<td class="confluenceTd"><p> <em>Success message when your credentials are valid</em> </p></td>
</tr>
</tbody></table></div>


<p>Then, for each Jenkins job, configure the target RunDeck job that should be executed, along with its options :</p>

<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"><p> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/54296708/54493206.png" data-image-src="attachments/54296708/54493206.png" data-unresolved-comment-count="0" data-linked-resource-id="54493206" data-linked-resource-version="3" data-linked-resource-type="attachment" data-linked-resource-default-alias="job-config.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="54296708" data-linked-resource-container-version="63"></span> </p></td>
<td class="confluenceTd"><p> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/54296708/57409793.png" data-image-src="attachments/54296708/57409793.png" data-unresolved-comment-count="0" data-linked-resource-id="57409793" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="job-config-check.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="54296708" data-linked-resource-container-version="63"></span> </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> <em>The per-job configuration screen</em> </p></td>
<td class="confluenceTd"><p> <em>If you click</em> &quot;Check Job&quot; <em>it will display the job details (group, job name and project)</em> </p></td>
</tr>
</tbody></table></div>


<ul>
	<li>Note that the &quot;options&quot; should be expressed in the java-properties format, and that Jenkins environment variables are expanded when making the RunDeck API calls (for more details, read the integrated-help in your Jenkins instance by clicking the &quot;?&quot; icon next to the &quot;options&quot; field).</li>
	<li>The &quot;tag&quot; field is used to perform &quot;on-demand&quot; job scheduling on RunDeck : if the value is not empty, we will check if the SCM changelog (= the commit message) contains the given tag, and only schedule a job execution if it is present. For example you can set the value to &quot;#deploy&quot;. Note that if this value is left empty, we will ALWAYS schedule a job execution.</li>
	<li>You can choose to wait for the RunDeck job to finish before finishing the Jenkins build. Otherwise, the default behavior is to trigger a RunDeck job, and finish the Jenkins build (usually before the RunDeck job has ended).</li>
	<li>If the last checkbox is checked, then a failure to schedule the job execution on RunDeck will fail the Jenkins build. Otherwise, the RunDeck integration won't interact with the result of your Jenkins build (even if RunDeck is down).</li>
</ul>


<h3 id="RunDeckPlugin-Post-deploymentjob">Post-deployment job</h3>

<p>The goal is to continue the deployment pipeline after a successful deployment : RunDeck deploys your application, and triggers a build on Jenkins to run some integration tests (using Selenium for example).</p>

<h4 id="RunDeckPlugin-Configuration.1">Configuration</h4>

<p>First, you need to configure the <a href="http://rundeck.org/docs/RunDeck-Guide.html#webhooks" class="external-link" rel="nofollow">WebHook Notification</a> in your RunDeck jobs. Set it to the url <a href="http://JENKINS_HOST/plugin/rundeck/webhook/" class="external-link" rel="nofollow">http://JENKINS_HOST/plugin/rundeck/webhook/</a>.</p>

<p>Then, configure the &quot;RunDeck Trigger&quot; on your Jenkins jobs : activate it, and optionally filter the notifications from RunDeck.</p>

<h4 id="RunDeckPlugin-Use.1">Use</h4>

<p>If your Jenkins job is started by a RunDeck notification, you can access the data of the RunDeck notification as environment variables :</p>

<ul>
	<li><strong>RDECK_JOB_ID</strong> : the ID (UUID) of the job</li>
	<li><strong>RDECK_JOB_NAME</strong> : the name of the job</li>
	<li><strong>RDECK_JOB_GROUP</strong> : the group of the job</li>
	<li><strong>RDECK_JOB_DESCRIPTION</strong> : the description of the job</li>
	<li><strong>RDECK_PROJECT</strong> : the name of the project</li>
	<li><strong>RDECK_EXEC_ID</strong> : the ID of the execution</li>
	<li><strong>RDECK_EXEC_STATUS</strong> : the status of the execution (one of SUCCEEDED, FAILED or ABORTED)</li>
	<li><strong>RDECK_EXEC_STARTED_BY</strong> : the user who started the execution</li>
	<li><strong>RDECK_EXEC_STARTED_AT</strong> : the date at which the execution started</li>
	<li><strong>RDECK_EXEC_ENDED_AT</strong> : the date at which the execution ended</li>
	<li><strong>RDECK_EXEC_ABORTED_BY</strong> : the user who aborted the execution (if the status is ABORTED)</li>
	<li><strong>RDECK_EXEC_DURATION_MILLIS</strong> : the duration of the execution, in milli-seconds</li>
	<li><strong>RDECK_EXEC_DURATION_SECONDS</strong> : the duration of the execution, in seconds</li>
	<li><strong>RDECK_EXEC_DURATION</strong> : the duration of the execution, as a human-readable string (&quot;3 minutes 34 seconds&quot;)</li>
	<li><strong>RDECK_EXEC_SHORT_DURATION</strong> : the duration of the execution, as a short human-readable string (&quot;0:03:34.187&quot;)</li>
	<li><strong>RDECK_EXEC_URL</strong> : the url of the execution (on the RunDeck Web GUI)</li>
	<li><strong>RDECK_EXEC_DESCRIPTION</strong> : the description of the execution</li>
	<li><strong>RDECK_EXEC_ARG_[NAME]</strong> : the value of a Job option passed to the execution <em>(plugin version 3.0 or later)</em></li>
</ul>


<h3 id="RunDeckPlugin-OptionProvider">Option Provider</h3>

<p>Using Jenkins as an <a href="http://rundeck.org/docs/RunDeck-Guide.html#option-model-provider" class="external-link" rel="nofollow">Option provider</a> for RunDeck is very easy, because you don't need to configure anything on the Jenkins side. You just need to point your RunDeck option &quot;remote url&quot; to one of the following url :</p>

<h4 id="RunDeckPlugin-OptionProviderforartifacts">Option Provider for artifacts</h4>

<p>List all artifacts for a given project / build, with a reference to the absolute url of the artifact. Useful if you have multiple artifacts to deploy (one per architecture for example).<br/>
Example (RunDeck screen when executing a job with an &quot;artifact&quot; option, taking its values from Jenkins) :<br/>
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/54296708/57409730.png" data-image-src="attachments/54296708/57409730.png" data-unresolved-comment-count="0" data-linked-resource-id="57409730" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="option-provider-artifact.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="54296708" data-linked-resource-container-version="63"></span></p>

<p>The url : <a href="http://JENKINS_HOST/plugin/rundeck/options/artifact" class="external-link" rel="nofollow">http://JENKINS_HOST/plugin/rundeck/options/artifact</a></p>





<ul>
	<li>The parameter <strong>project</strong> is mandatory (name of the job)</li>
	<li>The parameter <strong>build</strong> is optional (default value is 'last'). It could be either a build number, or &quot;last&quot;, &quot;lastStable&quot; or &quot;lastSuccessful&quot;.</li>
	<li>The parameter <strong>artifactRegex</strong> is optional. It is a java-regex used to filter the artifacts to return (if empty, all artifacts will be returned).</li>
</ul>


<p>Example : http://JENKINS_HOST/plugin/rundeck/options/artifact?project=my-job&amp;build=lastSuccessful&amp;artifactRegex=.*\.war</p>








<h4 id="RunDeckPlugin-OptionProviderforbuilds">Option Provider for builds</h4>

<p>List all builds (versions) for a given project / artifact, with a reference to the absolute url of the artifact. Useful if you have only 1 main artifact, but want to easily re-deploy an older version of the artifact.<br/>
Example (RunDeck screen when executing a job with a &quot;build&quot; option, taking its values from Jenkins) :<br/>
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/54296708/57409729.png" data-image-src="attachments/54296708/57409729.png" data-unresolved-comment-count="0" data-linked-resource-id="57409729" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="option-provider-build.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="54296708" data-linked-resource-container-version="63"></span></p>

<p>The url : <a href="http://JENKINS_HOST/plugin/rundeck/options/build" class="external-link" rel="nofollow">http://JENKINS_HOST/plugin/rundeck/options/build</a></p>







<ul>
	<li>The parameter <strong>project</strong> is mandatory (name of the job)</li>
	<li>Either the parameter <strong>artifact</strong> (exact filename of the artifact) or <strong>artifactRegex</strong> (java-regex matching the filename of the artifact) is mandatory</li>
	<li>The parameter <strong>limit</strong> is optional. It should be an integer, and is used to limit the number of builds (versions) to return.</li>
	<li>The parameters <strong>includeLastStableBuild</strong>, <strong>includeLastSuccessfulBuild</strong> and <strong>includeLastBuild</strong> are optional booleans. If it is equals to &quot;true&quot;, then we will add an entry for the last / last stable / last successful build.</li>
</ul>


<p>Example : <a href="http://JENKINS_HOST/plugin/rundeck/options/build?project=my-job&amp;artifact=my-webapp.war&amp;limit=5&amp;includeLastSuccessfulBuild=true&amp;includeLastStableBuild=true" class="external-link" rel="nofollow">http://JENKINS_HOST/plugin/rundeck/options/build?project=my-job&amp;artifact=my-webapp.war&amp;limit=5&amp;includeLastSuccessfulBuild=true&amp;includeLastStableBuild=true</a></p>








<h4 id="RunDeckPlugin-OptionProviderAccess">Option Provider Access</h4>

<p><span style="color: rgb(255,102,0);"><strong>Note</strong></span>: Rundeck will call the url anonymously which means the Jenkins job should provide access to Discover and Read the job. See Matrix based security documentation: <a href="https://wiki.jenkins-ci.org/display/JENKINS/Matrix-based+security#Matrix-basedsecurity-Job" class="external-link" rel="nofollow">https://wiki.jenkins-ci.org/display/JENKINS/Matrix-based+security#Matrix-basedsecurity-Job</a></p>








<h2 id="RunDeckPlugin-CompatibilityMatrix">Compatibility Matrix</h2>

<p>This plugin is not compatible with all versions of RunDeck</p>

<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin version </p></th>
<th class="confluenceTh"><p> RunDeck 1.0 / 1.1 </p></th>
<th class="confluenceTh"><p> RunDeck 1.2+ </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> 1.x </p></td>
<td class="confluenceTd"><p> <img class="emoticon emoticon-tick" src="images/icons/emoticons/check.svg" data-emoticon-name="tick" alt="(tick)"/> </p></td>
<td class="confluenceTd"><p> <img class="emoticon emoticon-question" src="images/icons/emoticons/help_16.svg" data-emoticon-name="question" alt="(question)"/> </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> 2.x </p></td>
<td class="confluenceTd"><p> <img class="emoticon emoticon-cross" src="images/icons/emoticons/error.svg" data-emoticon-name="cross" alt="(error)"/> </p></td>
<td class="confluenceTd"><p> <img class="emoticon emoticon-tick" src="images/icons/emoticons/check.svg" data-emoticon-name="tick" alt="(tick)"/> </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> 3.x </p></td>
<td class="confluenceTd"><p> <img class="emoticon emoticon-cross" src="images/icons/emoticons/error.svg" data-emoticon-name="cross" alt="(error)"/><br class="atl-forced-newline"/> </p></td>
<td class="confluenceTd"><p> <img class="emoticon emoticon-tick" src="images/icons/emoticons/check.svg" data-emoticon-name="tick" alt="(tick)"/><br class="atl-forced-newline"/> </p></td>
</tr>
</tbody></table></div>


<p>If you are using Plugin version 3.x and need to access an older Rundeck server, you can set the API version in the plugin settings.</p>


<p>You can find older versions of the plugin here : <a href="http://maven.jenkins-ci.org/content/repositories/releases/org/jenkins-ci/plugins/rundeck/" class="external-link" rel="nofollow">http://maven.jenkins-ci.org/content/repositories/releases/org/jenkins-ci/plugins/rundeck/</a></p>








<h2 id="RunDeckPlugin-FAQ">FAQ</h2>

<h4 id="RunDeckPlugin-KnownIssues">Known Issues</h4>

<ul>
	<li>If you have invalid links to RunDeck executions, check your RunDeck configuration : fix the property &quot;grails.serverURL&quot; in the file $RDECK_HOME/server/config/rundeck-config.properties.</li>
	<li>With the versions 1.x of the plugin, you can't have RunDeck jobs with the same groupPath/jobName on multiple projects.</li>
	<li>Remote options getting 400 server error from Jenkins probably mean you need to grant anonymous access to Discover and Read the Jenkins project</li>
</ul>


<h2 id="RunDeckPlugin-Links">Links</h2>

<ul>
	<li>Sources on github : <a href="https://github.com/jenkinsci/rundeck-plugin" class="external-link" rel="nofollow">https://github.com/jenkinsci/rundeck-plugin</a></li>
	<li>Download binaries (.hpi files) on nexus : <a href="http://maven.jenkins-ci.org/content/repositories/releases/org/jenkins-ci/plugins/rundeck/" class="external-link" rel="nofollow">http://maven.jenkins-ci.org/content/repositories/releases/org/jenkins-ci/plugins/rundeck/</a></li>
</ul>


<h2 id="RunDeckPlugin-ChangeLog">Change Log</h2>

<h4 id="RunDeckPlugin-Version3.6.1(Jan26,2017)">Version 3.6.1 (Jan 26, 2017)</h4>

<ul>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-34510" class="external-link" rel="nofollow">JENKINS-34510</a> Improve Jenkins startup time and Rundeck jobs generation with job-dsl thanks to caching (<strong>please note</strong>: it has to be enabled explicitly in the global config)</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-31423" class="external-link" rel="nofollow">JENKINS-31423</a> Allow build parameters or references to environment variables in 'Job Identifier' field</li>
	<li>Add Jenkins Pipelines support to Option Provider</li>
	<li>Update RunDeck API Java client library to 13.1</li>
</ul>





<h4 id="RunDeckPlugin-TODOlist">TODO list</h4>

<ul>
	<li>Internationalization</li>
	<li>Option provider : add integration with the <a href="Promoted-Builds-Plugin.html">Promoted Builds Plugin</a> and/or <a href="Promoted-Builds-Simple-Plugin.html">Promoted Builds Simple Plugin</a> so that we can filter only &quot;promoted&quot; builds.</li>
	<li>Use a drop-down field to select the RunDeck job (list of jobs retrieved using the API) instead of the basic text field</li>
</ul>


<h3 id="RunDeckPlugin-Previousversions">Previous versions</h3>


<h5 id="RunDeckPlugin-Version3.6.0-skipped">Version 3.6.0 - skipped</h5>


<h5 id="RunDeckPlugin-Version3.5.4(May19,2016)">Version 3.5.4 (May 19, 2016)</h5>

<ul>
	<li>New: <a href="https://issues.jenkins-ci.org/browse/JENKINS-31150" class="external-link" rel="nofollow">JENKINS-22851</a> Support multiple Rundeck installations: Configure multiple Rundeck  instances (in the global config), and choose the instance to use in the  job configuration</li>
	<li>New: <a href="https://issues.jenkins-ci.org/browse/JENKINS-31150" class="external-link" rel="nofollow">JENKINS-31150</a> Support Multiple SCM tags for rundeck notifier</li>
	<li>Fixed: <a href="https://issues.jenkins-ci.org/browse/JENKINS-28697" class="external-link" rel="nofollow">JENKINS-28697</a> Aborted job is marked as SUCCESS if &quot;Wait for Rundeck&quot; is used</li>
</ul>


<h5 id="RunDeckPlugin-Version3.5(Oct20,2015)">Version 3.5 (Oct 20, 2015)</h5>

<ul>
	<li>Use display name for the build name</li>
	<li>Set the build result to failure when rundeck fails AND shouldFailTheBuild is set to true. Previously only &quot;marked&quot; the failure; by changing the status of the build to FAIL, other plugins that might be called after rundeck will then be able to detect the status, and handle accordingly.</li>
	<li>Fixed bug where log tailer returned completed even though the job was still running (output was completed). Now both execCompleted and completed are validated</li>
	<li>Filtered out RundeckOutputEntries with empty messages</li>
	<li>No longer depend on last mod for sleep timing since behaviour seems to be not aligned with expectations. Now checking if offset has changed.</li>
	<li>Fixed bug where checkbox wasn't visible in Jenkins</li>
	<li>[<a href="https://issues.jenkins-ci.org/browse/JENKINS-28059" class="external-link" rel="nofollow">JENKINS-28059</a>] Validate API version in test connection</li>
</ul>


<h5 id="RunDeckPlugin-Version3.4(Apr16,2015)">Version 3.4 (Apr 16, 2015)</h5>

<ul>
	<li>Added support to include Rundeck logs in the Jenkins build log</li>
	<li>Support jobs inside folders</li>
	<li>Fix for Exception when using $ARTIFACT_NAME</li>
	<li>Fixed: Badge icons fail is jenkins is not root as &quot;/&quot;</li>
	<li>Changed &quot;RunDeck&quot; text items to the correct &quot;Rundeck&quot;</li>
	<li>Updated the Rundeck client to v12.0 [Fixes <a href="https://issues.jenkins-ci.org/browse/JENKINS-27971" class="external-link" rel="nofollow">JENKINS-27971</a> — NPE with Rundeck v2.4.2]</li>
</ul>


<h5 id="RunDeckPlugin-Version3.2(April15,2014)">Version 3.2 (April 15, 2014)</h5>

<ul>
	<li>Fixed issue with parsing Job options when option values have hyphens</li>
</ul>


<h5 id="RunDeckPlugin-Version3.1(March29,2014)">Version 3.1 (March 29, 2014)</h5>

<ul>
	<li>Build the URL using the getRootUrl method, which will use the user configured root url</li>
</ul>





<h5 id="RunDeckPlugin-Version3.0(January28,2014)">Version 3.0 (January 28, 2014)</h5>

<ul>
	<li>Update rundeck API client lib to latest (9.3)</li>
	<li>Support Token authentication</li>
	<li>Fix authentication against Rundeck running as a war in Tomcat</li>
	<li>Support RDECK_EXEC_ARG_[NAME] in triggers from Rundeck webhook notifications</li>
	<li>Update naming (&quot;RunDeck&quot; changed to &quot;Rundeck&quot;), update icon</li>
</ul>


<h5 id="RunDeckPlugin-Version2.11(January4,2012)">Version 2.11 (January 4, 2012)</h5>

<ul>
	<li>Fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-12228" class="external-link" rel="nofollow">JENKINS-12228</a> : allow to filter artifacts returned by the option provider, based on a java-regex</li>
</ul>


<h5 id="RunDeckPlugin-Version2.10(October12,2011)">Version 2.10 (October 12, 2011)</h5>

<ul>
	<li>Fix icon path URL - Thanks to <a href="https://github.com/joepcds" class="external-link" rel="nofollow">Joe Passavanti</a> for the <a href="https://github.com/vbehar/jenkins-rundeck-plugin/pull/2" class="external-link" rel="nofollow">patch</a> !</li>
	<li>Small UI fix : don't display job's ID (in rundeck 1.3+, ID is an UUID, and it breaks the UI because it is too long)</li>
</ul>


<h5 id="RunDeckPlugin-Version2.9(September18,2011)">Version 2.9 (September 18, 2011)</h5>

<ul>
	<li>Allow to filter nodes when triggering a rundeck job (using the &quot;nodeFilters&quot; parameter)</li>
</ul>


<h5 id="RunDeckPlugin-Version2.8(September16,2011)">Version 2.8 (September 16, 2011)</h5>

<ul>
	<li>Configure RunDeck jobs with either a job ID, or an UUID (rundeck 1.3+), or a &quot;reference&quot;. A job reference is expressed in the format &quot;project:group/job&quot;, for example : &quot;my-project-name:main-group/sub-group/my-job-name&quot;, or &quot;my-project-name:my-job-name&quot; (for a job without a group).</li>
</ul>


<h5 id="RunDeckPlugin-Version2.7(September14,2011)">Version 2.7 (September 14, 2011)</h5>

<ul>
	<li>Add a build trigger, using RunDeck 1.3 <a href="http://rundeck.org/docs/RunDeck-Guide.html#webhooks" class="external-link" rel="nofollow">WebHook Notification</a>, so that you can run integration tests with Jenkins after a RunDeck deployment (alternative to the &quot;Wait for RunDeck job to finish ?&quot; checkbox in the notifier configuration and a post-build action to schedule another job)</li>
	<li>Upgrade <a href="http://vbehar.github.com/rundeck-api-java-client/" class="external-link" rel="nofollow">RunDeck API Java client</a> to version 1.2</li>
</ul>


<h5 id="RunDeckPlugin-Version2.6(September2,2011)">Version 2.6 (September 2, 2011)</h5>

<ul>
	<li>Add token expansion for $ARTIFACT_NAME{regex} in options (see <a href="http://groups.google.com/group/rundeck-discuss/browse_thread/thread/94a6833b84fdc10b" class="external-link" rel="nofollow">http://groups.google.com/group/rundeck-discuss/browse_thread/thread/94a6833b84fdc10b</a>)</li>
</ul>


<h5 id="RunDeckPlugin-Version2.5(July11,2011)">Version 2.5 (July 11, 2011)</h5>

<ul>
	<li>Internal refactoring : use the <a href="http://vbehar.github.com/rundeck-api-java-client/" class="external-link" rel="nofollow">RunDeck API Java client</a></li>
	<li>Never display the RunDeck password in logs (even in case of error)</li>
</ul>


<h5 id="RunDeckPlugin-Version2.4(June28,2011)">Version 2.4 (June 28, 2011)</h5>

<ul>
	<li>Change Job ID support to use Strings instead of Long, allowing UUIDs (coming in RunDeck 1.3) - Thanks to <a href="https://github.com/gschueler" class="external-link" rel="nofollow">Greg Schueler</a> for the <a href="https://github.com/jenkinsci/rundeck-plugin/pull/1" class="external-link" rel="nofollow">patch</a> !</li>
</ul>


<h5 id="RunDeckPlugin-Version2.3.1(June22,2011)">Version 2.3.1 (June 22, 2011)</h5>

<ul>
	<li>Fix a bug introduced in version 2.3 : NPE related to the new field (shouldWaitForRundeckJob) in already configured jobs. Workaround is to re-save job configuration or use version 2.3.1</li>
</ul>


<h5 id="RunDeckPlugin-Version2.3(June21,2011)">Version 2.3 (June 21, 2011)</h5>

<ul>
	<li>Add an option to wait for the RunDeck job to finish (by polling the execution every 5 seconds via the RunDeck API)</li>
	<li>Add a validation button on the job configuration screen, to check the RunDeck job (display job name, group and project)</li>
</ul>


<h5 id="RunDeckPlugin-Version2.2(June17,2011)">Version 2.2 (June 17, 2011)</h5>

<ul>
	<li>Add SSL support for RunDeck REST API (trust all certificates and hosts)</li>
</ul>


<h5 id="RunDeckPlugin-Version2.1(June8,2011)">Version 2.1 (June 8, 2011)</h5>

<ul>
	<li>New feature : display information about the RunDeck job on the page of a Jenkins job (with a direct link to the RunDeck job details webpage)</li>
</ul>


<h5 id="RunDeckPlugin-Version2.0.1(June8,2011)">Version 2.0.1 (June 8, 2011)</h5>

<ul>
	<li>Rerelease 2.0 and mark it as incompatible with versions 1.x (jobs configuration needs to be updated), so that users can see it in the update-center before updating.</li>
</ul>


<h5 id="RunDeckPlugin-Version2.0(June6,2011)">Version 2.0 (June 6, 2011)</h5>

<div class="confluence-information-macro confluence-information-macro-note"><p class="title">Compatibility Warning !</p><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>This version won't work with RunDeck 1.0/1.1, and the configuration per job has changed, you will need to update the configuration for all your jobs that use this plugin !</p></div></div>

<ul>
	<li>Use the new <a href="http://rundeck.org/docs/RunDeck-Guide.html#rundeck-api" class="external-link" rel="nofollow">RunDeck 1.2+ HTTP REST API</a>, and thus is incompatible with RunDeck 1.0 or RunDeck 1.1</li>
	<li>Use &quot;jobId&quot; to reference RunDeck jobs, instead of the &quot;groupPath/jobName&quot; couple, so you'll need to reconfigure your Jenkins jobs. We switched to the &quot;jobId&quot; reference because it is unique across all projects in a RunDeck instance, which is not the case for the &quot;groupPath/jobName&quot; couple.</li>
	<li>Set required Jenkins version to 1.400</li>
</ul>


<h5 id="RunDeckPlugin-Version1.8(June5,2011)">Version 1.8 (June 5, 2011)</h5>

<ul>
	<li>Fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-9876" class="external-link" rel="nofollow">JENKINS-9876</a> : password field in system configuration should be hidden.</li>
</ul>


<h5 id="RunDeckPlugin-Version1.7(June1,2011)">Version 1.7 (June 1, 2011)</h5>

<ul>
	<li>New improvement to the option provider : you can now match artifacts with a java-regex in addition to exact-match of the artifact filename (see the new 'artifactRegex' parameter).</li>
</ul>


<h5 id="RunDeckPlugin-Version1.6(April6,2011)">Version 1.6 (April 6, 2011)</h5>

<ul>
	<li>Fix a bug with RunDeck 1.2 : scheduling a job with options did not work on RunDeck 1.2.</li>
	<li>Set required Jenkins version to 1.399 (<a href="http://groups.google.com/group/jenkinsci-dev/msg/26408e6401dd6ee0" class="external-link" rel="nofollow">See the thread on the jenkinsci-dev mailing-list</a>).</li>
</ul>


<h5 id="RunDeckPlugin-Version1.5.1(March24,2011)">Version 1.5.1 (March 24, 2011)</h5>

<ul>
	<li>Rerelease 1.5 to properly set required Jenkins version (<a href="http://groups.google.com/group/jenkinsci-dev/msg/26408e6401dd6ee0" class="external-link" rel="nofollow">See the thread on the jenkinsci-dev mailing-list</a>) : the plugin now depends on Jenkins 1.398 (or higher).</li>
</ul>


<h5 id="RunDeckPlugin-Version1.5(March4,2011)">Version 1.5 (March 4, 2011)</h5>

<ul>
	<li>Fix bug : when using a &quot;tag&quot; to auto-deploy, we should also check the SCM changelog from upstream builds. So that you can commit to an upstream job, and have all downstream jobs redeployed.</li>
</ul>


<h5 id="RunDeckPlugin-Version1.4(March1,2011)">Version 1.4 (March 1, 2011)</h5>

<ul>
	<li>New improvement to the option provider : in addition to the list of artifacts for a given build, you can now get the list of builds (versions) for a given artifact.</li>
</ul>


<h5 id="RunDeckPlugin-Version1.3(February27,2011)">Version 1.3 (February 27, 2011)</h5>

<ul>
	<li>Jenkins can now be used as an &quot;<a href="http://rundeck.org/docs/RunDeck-Guide.html#option-model-provider" class="external-link" rel="nofollow">Option provider</a>&quot; for RunDeck, if you want to use your Jenkins build artifacts as an option to a RunDeck job.</li>
</ul>


<h5 id="RunDeckPlugin-Version1.2(February27,2011)">Version 1.2 (February 27, 2011)</h5>

<ul>
	<li>Jenkins environment variables specified in the &quot;options&quot; are now correctly expanded (<a href="https://github.com/vbehar/jenkins-rundeck-plugin/issues/1" class="external-link" rel="nofollow">GitHub issue</a>)</li>
</ul>


<h5 id="RunDeckPlugin-Version1.1(February11,2011)">Version 1.1 (February 11, 2011)</h5>

<ul>
	<li>Do nothing if the build is failing</li>
	<li>Add a link to the RunDeck job execution page (on each Jenkins successful build)</li>
	<li>Validation on the form fields (test if RunDeck is alive, test credentials, etc)</li>
</ul>


<h5 id="RunDeckPlugin-Version1.0(February10,2011)">Version 1.0 (February 10, 2011)</h5>

<ul>
	<li>Initial release</li>
	<li>Compatible (and tested) with Jenkins 1.396 and RunDeck 1.1</li>
</ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/57409728.png">job-config.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/57409731.png">jenkins-config.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/54493208.png">logo-rundeck.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/54493207.png">logo-rundeck.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/57409792.png">job-config.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/57409729.png">option-provider-build.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/57409730.png">option-provider-artifact.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/54493205.png">jenkins-config.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/57409732.png">jenkins-config-validation-nok.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/57409733.png">jenkins-config-validation-ok.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/54493206.png">job-config.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/54296708/57409793.png">job-config-check.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:44</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
