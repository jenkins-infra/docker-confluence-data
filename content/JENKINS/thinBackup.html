<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : thinBackup</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : thinBackup
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (tofuatjava)</span>, last modified by <span class='editor'> Unknown User (ewypych)</span> on Apr 08, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View ThinBackup <a href="https://plugins.jenkins.io/thinBackup" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>



<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>This plugin is up for adoption.</strong> Want to help improve this plugin? <a href="/display/JENKINS/Adopt+a+Plugin" title="Adopt a Plugin">Click here to learn more</a>!</p></div></div>This plugin simply backs up the global and job specific configurations (not the archive or the workspace). </p><h2 id="thinBackup-Whyanotherbackupplugin">Why another backup plugin</h2><p>The <a href="Backup-Plugin.html">Backup Plugin</a> only does manual backups, and stores all data found in JENKINS_HOME. This is sometimes (e.g. big Jenkins environment) not practical because of time and disk space requirements, and because it can only be manually triggered. <em>thinBackup</em>s can be scheduled and only backs up the most vital configuration info.</p><h2 id="thinBackup-Documentation">Documentation</h2><p>This plugin adds another management link to 'Manage Hudson' called ThinBackup which looks like this:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://wiki.jenkins-ci.org/download/attachments/49512461/ManagementLink.PNG" data-image-src="http://wiki.jenkins-ci.org/download/attachments/49512461/ManagementLink.PNG"></span></p><p>This new link provides the following actions:<br/> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://wiki.jenkins-ci.org/download/attachments/49512461/thinBackup.PNG" data-image-src="http://wiki.jenkins-ci.org/download/attachments/49512461/thinBackup.PNG"></span></p><h3 id="thinBackup-BackupNow">Backup Now</h3><p>Triggers a manual full back up right now.</p><h3 id="thinBackup-Restore">Restore</h3><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://wiki.jenkins-ci.org/download/attachments/49512461/restore.PNG" data-image-src="http://wiki.jenkins-ci.org/download/attachments/49512461/restore.PNG"></span><br/>Select the date of the backup you would like to restore. After the restore finishes you are redirected to the plugin main page. To activate the restored settings you need to restart jenkins.</p><p><strong>Note:</strong> The file 'nextBuildnumber' will not be backed up or restored to prevent buildnumber collision by default. The archive and the workspace will not be deleted or changed, but all backed up files will simply be overwritten with the restored versions (e.g. config.xml, thinBackup.xml -&gt; for more info simply look in a backup).</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://wiki.jenkins-ci.org/download/attachments/49512461/backupStore.PNG" data-image-src="http://wiki.jenkins-ci.org/download/attachments/49512461/backupStore.PNG"></span>.</p><h5 id="thinBackup-Restorenextbuildnumberfile(iffoundinbackup)">Restore next build number file (if found in backup)</h5><p>If this option is enabled, the file nextBuildNumber will also be restored.<br/>*Note:*Take special care when restoring a backup that contains a nextBuildNumber file, as this may potentially cause a lot of problems.</p><h5 id="thinBackup-Restoreplugins">Restore plugins</h5><p>If this option is enabled, the plugins get restored. You need an active internet connection to the update server, because plugins will be downloaded from the update server to keep the backup small.</p><h3 id="thinBackup-Settings">Settings</h3><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/49512461/58195988.png" data-image-src="attachments/49512461/58195988.png" data-unresolved-comment-count="0" data-linked-resource-id="58195988" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="thinBackupSettings.PNG" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="49512461" data-linked-resource-container-version="48"></span></p><h5 id="thinBackup-Backupdirectory">Backup directory</h5><p>Specify the backup directory. The Jenkins process needs write access to this directory. You can use environment variables like ${JENKINS_WORKSPACE} to specify the path.</p><h5 id="thinBackup-Backupscheduleforfullbackups">Backup schedule for full backups</h5><p>Specify schedule when a full backup is triggered. Cron notation is used. A full backup backs up all files even if there were no changes.</p><h5 id="thinBackup-Backupschedulefordifferentialbackups">Backup schedule for differential backups</h5><p>Specify schedule when a differential backup is triggered. Cron notation is used. A differential backup stores only modified data since the last full backup. If there are no changes detected, no diff backup will be created.</p><p><strong>Note:</strong> You do not need to specify a differential backup schedule if you only need full backups. Because differential backups depend on full backups, a schedule for full backups is mandatory if you specify a differential backup schedule.</p><h5 id="thinBackup-WaituntilJenkins/Hudsonisidletoperformabackup">Wait until Jenkins/Hudson is idle to perform a backup</h5><p>It is very recommended to enable this option (default). Nevertheless, many users report that the quiet mode is blocking the execution of long running jobs. If you disable this option the backup will be made without waiting for a safe state of your instance. In other words, the backup will be done immediately, and this could cause corrupt backups.</p><h5 id="thinBackup-ForceJenkinstoquitemodeafterspecifiedminutes">Force Jenkins to quite mode after specified minutes</h5><p>Force a quiet mode after the specified time in minutes to force a safe environment for the back up. Zero means the quite mode is forced directly when the back up is triggered by the scheduler. Read more about the back up process below.</p><h5 id="thinBackup-Maxnumberofbackupsets">Max number of backup sets</h5><p>To save disk space, you can specify the maximum number of stored backup sets. A backup set is defined as a full backup together with its referencing diff backups. Older backup sets will be deleted after the next full backup action. This also applies to zipped backup sets.</p><h5 id="thinBackup-Filesexcludedfrombackup">Files excluded from backup</h5><p>If you have specific files you do not want to back up, entering a regex here which identifies those files will prevent them being backed up. All files with a name matching this regular expression will not be backed up. Leave empty if not needed. If the expression is invalid, it will be disregarded.</p><h5 id="thinBackup-Backupbuildresults">Back up build results</h5><p>If this option is enabled, build results will also be backed up. This is potentially a lot of data, so think carefully about it. Once you decide to backup build results you get also to option about backup your build archives. Once again, be careful with this option, because it could be very <strong>time consuming</strong> and needs probably <strong>a lot of disk space</strong>!</p><h5 id="thinBackup-Backup&#39;userContents&#39;">Back up 'userContents'</h5><p>Jenkins provides a URL where you can put common data (e.g. static HTML, Tools, ...). you can back up all these data if you check this option.</p><h5 id="thinBackup-Backuponlybuildsmarkedtokeep">Backup only builds marked to keep</h5><p>If this option is enabled, only builds results/artifacts on builds which are marked &quot;Keep this build forever&quot; are backed up.</p><h5 id="thinBackup-Cleanupdifferentialbackups">Clean up differential backups</h5><p>If this option is enabled, all differential backups are removed whenever a new full backup is done.</p><h5 id="thinBackup-MoveoldbackupstoZIPfiles">Move old backups to ZIP files</h5><p>If this is checked, then whenever a new full backup is performed all old backup sets will be moved to ZIP files. Each ZIP file will contain one backup set, i.e. one full backup and any diff backups referencing it. The file name will identify the time frame where the backups are included (i.e. the time stamp of the full backup and the time stamp of the latest diff backup).</p><p><strong>Note:</strong> The setting &quot;<em>Max number of backup sets</em>&quot; applies to backup ZIP files created by thinBackup as well.</p><p><strong>Note:</strong> In case &quot;<em>Clean up differential backups</em>&quot; is checked, diff cleanup will be performed before zipping is done, and therefore no diff backups will be in the ZIP files.</p><h2 id="thinBackup-Backupprocess">Back up process</h2><p>Because many of you are asking why Jenkins is going to shutdown when a back up is triggered, I decided to explain my ideas behind the back up process.<br/>First of all, <strong>Jenkins will not be shut down at any time</strong>.<br/>Second, I use the build-in quiet mode (Jenkins is going to shutdown) to ensure a safe environment during the back up process and cancel the quiet mode afterwards. This could be misleading, I know, <strong>but there is no point where Jenkins will be shutdown</strong>.</p><p>So what is a safe environment?<br/>A safe environment would mean that no jobs are running. Because a running job could change a file in the workspace (results, build output, ...), in this case the file could be locked. This situation should be avoided by using the quiet mode.</p><p>How it works, an example:</p><ul><li>The scheduler triggers a backup</li><li>There are active jobs and some jobs are waiting in the queue</li><li>The back up waits for a safe environment (recommended way). This means running jobs will be finished in any case. Waiting jobs will be started as long Jenkins is not in the quiet mode. The 'Force Jenkins to quite mode after specified minutes' option will force Jenkins after the specified time into the quiet mode. From this point on no further jobs will be started until the backup is finished.<br/>In case of 'Wait until Jenkins/Hudson is idle to perform a backup' is disabled the backup will be done immediately.</li><li>The back up starts when no job is running.</li><li>Once the back up is finished the quiet mode will be canceled. Manually canceling the quiet mode will force a new quiet period.</li></ul><h2 id="thinBackup-Changelog">Changelog</h2><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh"><p>Version</p></th><th class="confluenceTh"><p>Comment</p></th></tr><tr><td class="confluenceTd"><p>1.8.0</p></td><td class="confluenceTd"><p>new feature: <a href="https://issues.jenkins-ci.org/browse/JENKINS-21221" class="external-link" rel="nofollow">JENKINS-21221</a>, <a href="https://issues.jenkins-ci.org/browse/JENKINS-21472" class="external-link" rel="nofollow">JENKINS-21472</a><br class="atl-forced-newline"/> this features will provide functionality to backup sources from 3rd party plugins</p></td></tr><tr><td class="confluenceTd"><p>1.7.4</p></td><td class="confluenceTd"><p>fixed issued: <a href="https://issues.jenkins-ci.org/browse/JENKINS-20026" class="external-link" rel="nofollow">JENKINS-20026</a></p></td></tr><tr><td class="confluenceTd"><p>1.7.3</p></td><td class="confluenceTd"><p>fixed issues: <a href="https://issues.jenkins-ci.org/browse/JENKINS-17475" class="external-link" rel="nofollow">JENKINS-17475</a><br class="atl-forced-newline"/> <img class="emoticon emoticon-warning" src="images/icons/emoticons/warning.svg" data-emoticon-name="warning" alt="(warning)"/> Upgrade Jenkins core version to 1.509, verions before this are not tested and midge be buggy.</p></td></tr><tr><td class="confluenceTd"><p>1.7.2</p></td><td class="confluenceTd"><p>fixed issues: <a href="https://issues.jenkins-ci.org/browse/JENKINS-16426" class="external-link" rel="nofollow">JENKINS-16426 </a> (-&gt; <a href="https://issues.jenkins-ci.org/browse/JENKINS-16897" class="external-link" rel="nofollow">JENKINS-16897 </a>) <br class="atl-forced-newline"/> improvements: <a href="https://issues.jenkins-ci.org/browse/JENKINS-16609" class="external-link" rel="nofollow">JENKINS-16609 </a></p></td></tr><tr><td class="confluenceTd"><p>1.7.1</p></td><td class="confluenceTd"><p><img class="emoticon emoticon-minus" src="images/icons/emoticons/forbidden.svg" data-emoticon-name="minus" alt="(minus)"/> defect artifact - Please do not use!</p></td></tr><tr><td class="confluenceTd"><p>1.7</p></td><td class="confluenceTd"><p>new features: <a href="https://issues.jenkins-ci.org/browse/JENKINS-10947" class="external-link" rel="nofollow">JENKINS-10947</a>: Plug-ins will be restored from the update server <br class="atl-forced-newline"/> improvements:<a href="https://issues.jenkins-ci.org/browse/JENKINS-15681" class="external-link" rel="nofollow">JENKINS-15681</a>: Support for Cloudbees Folders <br class="atl-forced-newline"/> fixed issues: <a href="https://issues.jenkins-ci.org/browse/JENKINS-15514" class="external-link" rel="nofollow">JENKINS-15514</a></p></td></tr><tr><td class="confluenceTd"><p>1.6.2</p></td><td class="confluenceTd"><p>fixed issues: <a href="https://issues.jenkins-ci.org/browse/JENKINS-14288" class="external-link" rel="nofollow">JENKINS-14288</a>, <a href="https://issues.jenkins-ci.org/browse/JENKINS-12173" class="external-link" rel="nofollow">JENKINS-12173</a>, <a href="https://issues.jenkins-ci.org/browse/JENKINS-12098" class="external-link" rel="nofollow">JENKINS-12098</a></p></td></tr><tr><td class="confluenceTd"><p>1.6.1</p></td><td class="confluenceTd"><p>fixed issues: <a href="https://issues.jenkins-ci.org/browse/JENKINS-14111" class="external-link" rel="nofollow">JENKINS-14111</a>, <a href="https://issues.jenkins-ci.org/browse/JENKINS-13980" class="external-link" rel="nofollow">JENKINS-13980</a></p></td></tr><tr><td class="confluenceTd"><p>1.6</p></td><td class="confluenceTd"><p>fixed issues: <a href="https://issues.jenkins-ci.org/browse/JENKINS-13427" class="external-link" rel="nofollow">JENKINS-13427</a><br class="atl-forced-newline"/> improvements: <a href="https://issues.jenkins-ci.org/browse/JENKINS-13059" class="external-link" rel="nofollow">JENKINS-13059</a></p></td></tr><tr><td class="confluenceTd"><p>1.5</p></td><td class="confluenceTd"><p>fixed issues: <br class="atl-forced-newline"/> improvements: <a href="https://issues.jenkins-ci.org/browse/JENKINS-8565" class="external-link" rel="nofollow">JENKINS-8565</a>; <a href="https://issues.jenkins-ci.org/browse/JENKINS-11062" class="external-link" rel="nofollow">JENKINS-11062</a>; <a href="https://issues.jenkins-ci.org/browse/JENKINS-11678" class="external-link" rel="nofollow">JENKINS-11678</a>; <a href="https://issues.jenkins-ci.org/browse/JENKINS-11975" class="external-link" rel="nofollow">JENKINS-11975</a><br class="atl-forced-newline"/> new features: <a href="https://issues.jenkins-ci.org/browse/JENKINS-10994" class="external-link" rel="nofollow">JENKINS-10994</a></p></td></tr><tr><td class="confluenceTd"><p>1.4</p></td><td class="confluenceTd"><p>fixed issues: <a href="https://issues.jenkins-ci.org/browse/JENKINS-10377" class="external-link" rel="nofollow">JENKINS-10377</a>; <a href="https://issues.jenkins-ci.org/browse/JENKINS-10381" class="external-link" rel="nofollow">JENKINS-10381</a></p></td></tr><tr><td class="confluenceTd"><p>1.3</p></td><td class="confluenceTd"><p>fixed issues: <a href="https://issues.jenkins-ci.org/browse/JENKINS-9117" class="external-link" rel="nofollow">JENKINS-9117</a>;<a href="https://issues.jenkins-ci.org/browse/JENKINS-8955" class="external-link" rel="nofollow">JENKINS-8955</a>;<a href="https://issues.jenkins-ci.org/browse/JENKINS-9171" class="external-link" rel="nofollow">JENKINS-9171</a>;<a href="https://issues.jenkins-ci.org/browse/JENKINS-9669" class="external-link" rel="nofollow">JENKINS-9669</a><br class="atl-forced-newline"/> new features: Compress old backupsets; exclude files from backup via regex</p></td></tr><tr><td class="confluenceTd"><p>1.2</p></td><td class="confluenceTd"><p>fixed issues: <a href="http://issues.jenkins-ci.org/browse/JENKINS-8782" class="external-link" rel="nofollow">JENKINS-8782</a>;<a href="http://issues.jenkins-ci.org/browse/JENKINS-8781" class="external-link" rel="nofollow">JENKINS-8781</a>; <a href="http://issues.jenkins-ci.org/browse/JENKINS-8606" class="external-link" rel="nofollow">JENKINS-8606</a>;<a href="http://issues.jenkins-ci.org/browse/JENKINS-8564" class="external-link" rel="nofollow">JENKINS-8564</a><br class="atl-forced-newline"/> <a href="http://issues.jenkins-ci.org/browse/JENKINS-8583" class="external-link" rel="nofollow">JENKINS-8583</a> will be fixed if you use Jenkins greater or equal 1.396</p></td></tr><tr><td class="confluenceTd"><p>1.1</p></td><td class="confluenceTd"><p>first published version</p></td></tr><tr><td class="confluenceTd"><p>1.0</p></td><td class="confluenceTd"><p>never published because of release problems</p></td></tr></tbody></table></div><h2 id="thinBackup-FeatureRequestsorBugReports">Feature Requests or Bug Reports</h2><p>Please let us know if you would have another option or feature for this plugin by entering an issue or write us an email. THANKS</p><p>Before submitting a feature request or bug report, you can check if it has already been submitted by searching issues in JIRA categorized under the thinbackup-plugin component. There are currently <span class="static-jira-issues_count" >
            <a class="issue-link" href="https://issues.jenkins.io/secure/IssueNavigator.jspa?reset=true&amp;jqlQuery=resolution+%3D+Unresolved+AND+component+%3D+thinbackup-plugin+ORDER+BY+cf%5B10324%5D+ASC+&amp;src=confmacro">
                            55 issues
                    </a>
                <span class="oauth-msg"> - <a class="static-oauth-init" href="https://wiki.jenkins.io/plugins/servlet/applinks/oauth/login-dance/authorize?applicationLinkID=dd058dce-0c66-3b77-8b09-71b1d7728747">Authenticate</a> to see issue details</span>
    </span>
 open.</p><p> </p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/49512461/52461569.png">ManagementLink.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/49512461/52461570.png">restore.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/49512461/52461571.png">settings.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/49512461/52461572.png">thinBackup.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/49512461/52461573.png">backupStore.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/49512461/58195989.png">thinBackupSettings.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/49512461/58195988.png">thinBackupSettings.PNG</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:53</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
